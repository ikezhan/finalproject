    <!-- Add instruction button -->
    <a href="./system-guide.html" class="instruction-button">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
            <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-6h2v6zm0-8h-2V7h2v2z"/>
        </svg>
        Instructions
    </a> 

    <!-- GitHub Pages notice -->
    <div style="
        position: fixed;
        top: 10px;
        left: 50%;
        transform: translateX(-50%);
        background: rgba(255, 193, 7, 0.9);
        color: #333;
        padding: 10px 20px;
        border-radius: 50px;
        font-size: 14px;
        z-index: 2000;
        text-align: center;
        max-width: 90%;
        box-shadow: 0 2px 10px rgba(0,0,0,0.1);">
        This is a static deployment on GitHub Pages using mock data.
        <br>API functionality simulated with pre-defined data for demonstration purposes.
    </div>

    <!-- Fetch schedule button -->
    <button id="fetchScheduleButton" style="
        background-color: #007bff;
        color: white;
        border: none;
        padding: 10px 15px;
        border-radius: 4px;
        cursor: pointer;
        font-size: 16px;
        margin: 10px 0;
        display: block;
        margin-left: auto;
        margin-right: auto;">Fetch Schedule</button>

    <!-- Schedule table -->
    <table id="scheduleTable">
        <thead>
            <tr>
                <th>Surgery Type</th>
                <th>Patient Age</th>
                <th>Surgeon</th>
                <th>Scheduled Date</th>
                <th>Scheduled Time</th>
                <th>Operating Room</th>
                <th>Estimated Duration</th>
                <th>Delay Risk</th>
            </tr>
        </thead>
        <tbody id="scheduleBody">
            <!-- Schedule rows will be dynamically added here -->
        </tbody>
    </table>

    <!-- Status message -->
    <div id="status" class="status"></div>

    <script>
        // Tab switching
        document.querySelectorAll('.tab').forEach(tab => {
            tab.addEventListener('click', () => {
                // Remove active class from all tabs
                document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
                document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));
                
                // Add active class to clicked tab
                tab.classList.add('active');
                const tabId = tab.getAttribute('data-tab');
                document.getElementById(`${tabId}-tab`).classList.add('active');
            });
        });
        
        // Status message
        function showStatus(message, type) {
            const statusDiv = document.getElementById('status');
            statusDiv.textContent = message;
            statusDiv.className = `status ${type}`;
            
            // Clear after 5 seconds
            setTimeout(() => {
                statusDiv.textContent = '';
                statusDiv.className = 'status';
            }, 5000);
        }
        
        // Fetch schedule
        async function fetchSchedule() {
            const scheduleBody = document.getElementById('scheduleBody');
            
            try {
                // Check if we're on GitHub Pages
                const isGitHubPages = window.location.hostname.includes('github.io');
                
                let data;
                
                if (isGitHubPages) {
                    // Use mock data for GitHub Pages
                    console.log('Using mock data for GitHub Pages');
                    
                    // Mock schedule data
                    data = {
                        schedule: [
                            {
                                surgery_type: "Hip Replacement",
                                patient_age: 65,
                                surgeon: "Dr. Smith",
                                scheduled_date: "2025-03-10",
                                scheduled_time: "09:00",
                                operating_room: "OR-1",
                                estimated_duration: 120,
                                delay_risk: "Low Risk"
                            },
                            {
                                surgery_type: "Knee Replacement",
                                patient_age: 72,
                                surgeon: "Dr. Johnson",
                                scheduled_date: "2025-03-10",
                                scheduled_time: "11:30",
                                operating_room: "OR-2",
                                estimated_duration: 90,
                                delay_risk: "Low Risk"
                            },
                            {
                                surgery_type: "Appendectomy",
                                patient_age: 45,
                                surgeon: "Dr. Wilson",
                                scheduled_date: "2025-03-10",
                                scheduled_time: "13:15",
                                operating_room: "OR-3",
                                estimated_duration: 60,
                                delay_risk: "High Risk"
                            },
                            {
                                surgery_type: "Cataract Surgery",
                                patient_age: 78,
                                surgeon: "Dr. Brown",
                                scheduled_date: "2025-03-10",
                                scheduled_time: "14:30",
                                operating_room: "OR-1",
                                estimated_duration: 45,
                                delay_risk: "Low Risk"
                            }
                        ]
                    };
                } else {
                    // Create a test surgery
                    const testSurgery = {
                        patient_age: 45,
                        bmi: 24.5,
                        surgery_type: 'Hip Replacement',
                        surgeon: 'Dr. Smith',
                        anesthesiologist: 'Dr. Brown',
                        nurse: 'Nurse A',
                        day_of_week: 'Monday',
                        time_preference: 'Morning',
                        pre_op_prep_time: 30,
                        transfer_to_or_time: 15,
                        anesthesia_time: 20,
                        positioning_time: 10,
                        comorbidities: 'Hypertension',
                        instrument_ready: 'Y',
                        pacu_bed_ready: 'Y',
                        scheduled_start: '09:00'
                    };
                    
                    // Create schedule request
                    const scheduleRequest = {
                        surgeries: [testSurgery],
                        start_date: '2025-03-10'
                    };
                    
                    // Send request to backend
                    const response = await fetch('http://localhost:8003/schedule', {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json'
                        },
                        body: JSON.stringify(scheduleRequest)
                    });
                    
                    if (!response.ok) {
                        throw new Error(`HTTP error! Status: ${response.status}`);
                    }
                    
                    data = await response.json();
                }
                
                console.log('Schedule data:', data);
                
                // Clear existing rows
                scheduleBody.innerHTML = '';
                
                // Check if we have schedule data
                if (data && data.schedule && Array.isArray(data.schedule)) {
                    // Add rows for each surgery
                    data.schedule.forEach(surgery => {
                        const row = document.createElement('tr');
                        row.className = surgery.delay_risk.toLowerCase().includes('high') ? 'high-risk' : 'low-risk';
                        
                        row.innerHTML = `
                            <td>${surgery.surgery_type}</td>
                            <td>${surgery.patient_age}</td>
                            <td>${surgery.surgeon}</td>
                            <td>${surgery.scheduled_date}</td>
                            <td>${surgery.scheduled_time}</td>
                            <td>${surgery.operating_room}</td>
                            <td>${surgery.estimated_duration}</td>
                            <td>${surgery.delay_risk}</td>
                        `;
                        
                        scheduleBody.appendChild(row);
                    });
                    
                    showStatus(`Successfully loaded ${data.schedule.length} surgeries.`, 'success');
                } else {
                    showStatus('No schedule data found in response.', 'error');
                }
            } catch (error) {
                console.error('Error fetching schedule:', error);
                showStatus(`Error: ${error.message}`, 'error');
            }
        }

        // Event listener for Fetch Schedule button
        document.getElementById('fetchScheduleButton').addEventListener('click', fetchSchedule);
        
        // Initial load - fetch schedule automatically
        document.addEventListener('DOMContentLoaded', fetchSchedule);

        // Add surgery
        async function addSurgery(event) {
            event.preventDefault();
            
            try {
                // Check if we're on GitHub Pages
                const isGitHubPages = window.location.hostname.includes('github.io');
                
                if (isGitHubPages) {
                    // Just show success message for GitHub Pages demo
                    showStatus('Surgery scheduled successfully! (Mock data for GitHub Pages)', 'success');
                    
                    // Switch to schedule tab and refresh
                    document.querySelector('.tab[data-tab="schedule"]').click();
                    fetchSchedule();
                    return;
                }
                
                // Get form values
                const surgery = {
                    patient_age: parseInt(document.getElementById('patientAge').value),
                    bmi: parseFloat(document.getElementById('bmi').value),
                    surgery_type: document.getElementById('surgeryType').value,
                    surgeon: document.getElementById('surgeon').value,
                    anesthesiologist: document.getElementById('anesthesiologist').value,
                    nurse: document.getElementById('nurse').value,
                    day_of_week: document.getElementById('dayOfWeek').value,
                    time_preference: document.getElementById('timePreference').value,
                    comorbidities: document.getElementById('comorbidities').value,
                    instrument_ready: document.getElementById('instrumentReady').value,
                    pacu_bed_ready: document.getElementById('pacuBedReady').value,
                    pre_op_prep_time: 30,
                    transfer_to_or_time: 15,
                    anesthesia_time: 20,
                    positioning_time: 10,
                    scheduled_start: document.getElementById('timePreference').value === 'Morning' ? '09:00' : '13:00'
                };
                
                // Create schedule request
                const scheduleRequest = {
                    surgeries: [surgery],
                    start_date: new Date().toISOString().split('T')[0]
                };
                
                // Send request to backend
                const response = await fetch('http://localhost:8003/schedule', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify(scheduleRequest)
                });
                
                if (!response.ok) {
                    throw new Error(`HTTP error! Status: ${response.status}`);
                }
                
                const data = await response.json();
                console.log('Schedule response:', data);
                
                showStatus('Surgery scheduled successfully!', 'success');
                
                // Switch to schedule tab and refresh
                document.querySelector('.tab[data-tab="schedule"]').click();
                fetchSchedule();
            } catch (error) {
                console.error('Error scheduling surgery:', error);
                showStatus(`Error: ${error.message}`, 'error');
            }
        }
        
        // Batch import
        async function importSurgeries() {
            const fileInput = document.getElementById('fileInput');
            const startDate = document.getElementById('startDate').value;
            
            if (!fileInput.files || fileInput.files.length === 0) {
                showStatus('Please select a file to upload', 'error');
                return;
            }
            
            const file = fileInput.files[0];
            
            try {
                // Check if we're on GitHub Pages
                const isGitHubPages = window.location.hostname.includes('github.io');
                
                if (isGitHubPages) {
                    // Mock response for GitHub Pages
                    const mockData = {
                        imported_count: 40,
                        schedule: [
                            {
                                surgery_type: "Hip Replacement",
                                patient_age: 65,
                                surgeon: "Dr. Smith",
                                scheduled_date: "2025-03-10",
                                scheduled_time: "09:00",
                                operating_room: "OR-1",
                                estimated_duration: 120,
                                delay_risk: "Low Risk"
                            },
                            {
                                surgery_type: "Knee Replacement",
                                patient_age: 72,
                                surgeon: "Dr. Johnson",
                                scheduled_date: "2025-03-10",
                                scheduled_time: "11:30",
                                operating_room: "OR-2",
                                estimated_duration: 90,
                                delay_risk: "Low Risk"
                            },
                            // More mock data would be here in a real implementation
                        ]
                    };
                    
                    showStatus(`Successfully imported ${mockData.imported_count} surgeries. (Mock data for GitHub Pages)`, 'success');
                    
                    // Switch to schedule tab and refresh
                    document.querySelector('.tab[data-tab="schedule"]').click();
                    fetchSchedule();
                    return;
                }
                
                const formData = new FormData();
                formData.append('file', file);
                formData.append('start_date', startDate);
                
                const response = await fetch('http://localhost:8003/batch-import', {
                    method: 'POST',
                    body: formData
                });
                
                if (!response.ok) {
                    throw new Error(`HTTP error! Status: ${response.status}`);
                }
                
                const data = await response.json();
                console.log('Batch import response:', data);
                
                if (data && data.schedule && Array.isArray(data.schedule)) {
                    showStatus(`Successfully imported ${data.imported_count} surgeries.`, 'success');
                    
                    // Switch to schedule tab and refresh
                    document.querySelector('.tab[data-tab="schedule"]').click();
                    fetchSchedule();
                } else {
                    showStatus('No schedule data found in response.', 'error');
                }
            } catch (error) {
                console.error('Error importing surgeries:', error);
                showStatus(`Error: ${error.message}`, 'error');
            }
        }
        
        // Download template
        function downloadTemplate() {
            // Check if we're on GitHub Pages
            const isGitHubPages = window.location.hostname.includes('github.io');
            
            if (isGitHubPages) {
                showStatus('Template download not available on GitHub Pages demo.', 'error');
                return;
            }
            
            window.open('http://localhost:8003/template', '_blank');
        }
    </script> 